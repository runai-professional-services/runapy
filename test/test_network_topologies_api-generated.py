# coding: utf-8

"""
Test file for NetworkTopologiesApi
Generated by OpenAPI Generator with custom template
"""

import pytest
import unittest.mock as mock
from datetime import datetime, timezone
import json

from runai.configuration import Configuration
from runai.api_client import ApiClient
from runai.models import *
from runai.exceptions import ApiException


class TestNetworkTopologiesApi:
    """Test cases for NetworkTopologiesApi"""

    @pytest.fixture(autouse=True)
    def setup(self):
        """Setup test fixtures"""
        self.configuration = Configuration(
            client_id="test-client",
            client_secret="test-secret",
            runai_base_url="https://test.run.ai",
        )
        self.api_client = ApiClient(self.configuration)
        self.api = NetworkTopologiesApi(self.api_client)

        # Mock the request method
        self.request_patcher = mock.patch.object(self.api_client.rest_client, "request")
        self.mock_request = self.request_patcher.start()
        yield
        self.request_patcher.stop()

    def test_create_network_topology(self):
        """Test case for create_network_topology

        Create network topologies Creates a network topology object based on the provided specification.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters
        network_topology_create_request = (
            runai.NetworkTopologyCreateRequest()
        )  # NetworkTopologyCreateRequest | The network topology to create.

        # Make request
        response = self.api.create_network_topology(
            network_topology_create_request=network_topology_create_request,
        )

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "POST"
        assert "/api/v1/network-topologies" in kwargs["url"]

        # Verify body
        assert kwargs["body"] is not None

        # Verify response
        assert isinstance(response, NetworkTopology)

    def test_create_network_topology_error(self):
        """Test error handling for create_network_topology"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters
        network_topology_create_request = runai.NetworkTopologyCreateRequest()

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.create_network_topology(
                network_topology_create_request=network_topology_create_request,
            )
        assert exc_info.value.status == 400

    def test_delete_network_topology(self):
        """Test case for delete_network_topology

        Delete network topology by ID. Delete an existing network topology by its ID.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({})
        self.mock_request.return_value = mock_response

        # Test parameters
        network_topology_id = "123e4567-e89b-12d3-a456-426614174000"  # str | The unique identifier for the network topology

        # Make request
        self.api.delete_network_topology(
            network_topology_id=network_topology_id,
        )

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "DELETE"
        assert "/api/v1/network-topologies/{networkTopologyId}" in kwargs["url"]

    def test_delete_network_topology_error(self):
        """Test error handling for delete_network_topology"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters
        network_topology_id = "123e4567-e89b-12d3-a456-426614174000"

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.delete_network_topology(
                network_topology_id=network_topology_id,
            )
        assert exc_info.value.status == 400

    def test_get_network_topologies(self):
        """Test case for get_network_topologies

        Get network topologies. Retrieve a list of network topologies with details.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters
        filter_by = [
            '["clusterId==123e4567-e89b-12d3-a456-426614174000","source=@Run.ai"]'
        ]  # List[str] | Filter results by a parameter. Use the format field-name operator value. Supported operators:  == Equals  != Not equals  <= Less than or equal  >= Greater than or equal  =@ Contains !@ Does not contain  =^ Starts with  =$ Ends with Date values must be in ISO 8601 timestamp format. Only the following operators support dates: == None, != None, <= None, >=.

        # Make request
        response = self.api.get_network_topologies()

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "GET"
        assert "/api/v1/network-topologies" in kwargs["url"]

        # Verify query parameters
        assert "filterBy=" in kwargs["url"]

        # Verify response
        assert isinstance(response, GetNetworkTopologies200Response)

    def test_get_network_topologies_error(self):
        """Test error handling for get_network_topologies"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.get_network_topologies()
        assert exc_info.value.status == 400

    def test_get_network_topologies_count(self):
        """Test case for get_network_topologies_count

        Count the amount of network topologies in a tenant. Retrieve the count of network topologies in a tenant group by selected attributes
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters
        filter_by = [
            '["clusterId==123e4567-e89b-12d3-a456-426614174000","source=@Run.ai"]'
        ]  # List[str] | Filter results by a parameter. Use the format field-name operator value. Supported operators:  == Equals  != Not equals  <= Less than or equal  >= Greater than or equal  =@ Contains !@ Does not contain  =^ Starts with  =$ Ends with Date values must be in ISO 8601 timestamp format. Only the following operators support dates: == None, != None, <= None, >=.

        # Make request
        response = self.api.get_network_topologies_count()

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "GET"
        assert "/api/v1/network-topologies/count" in kwargs["url"]

        # Verify query parameters
        assert "filterBy=" in kwargs["url"]

        # Verify response
        assert isinstance(response, CountResponse)

    def test_get_network_topologies_count_error(self):
        """Test error handling for get_network_topologies_count"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.get_network_topologies_count()
        assert exc_info.value.status == 400

    def test_get_network_topology_by_id(self):
        """Test case for get_network_topology_by_id

        Get network topology by id. Retrieve network topology details by Universally Unique Identifier (UUID).
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters
        network_topology_id = "123e4567-e89b-12d3-a456-426614174000"  # str | The unique identifier for the network topology

        # Make request
        response = self.api.get_network_topology_by_id(
            network_topology_id=network_topology_id,
        )

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "GET"
        assert "/api/v1/network-topologies/{networkTopologyId}" in kwargs["url"]

        # Verify response
        assert isinstance(response, NetworkTopology)

    def test_get_network_topology_by_id_error(self):
        """Test error handling for get_network_topology_by_id"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters
        network_topology_id = "123e4567-e89b-12d3-a456-426614174000"

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.get_network_topology_by_id(
                network_topology_id=network_topology_id,
            )
        assert exc_info.value.status == 400
