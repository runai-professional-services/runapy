# coding: utf-8

"""
Test file for AccessKeysApi
Generated by OpenAPI Generator with custom template
"""

import pytest
import unittest.mock as mock
from datetime import datetime, timezone
import json

from runai.configuration import Configuration
from runai.api_client import ApiClient
from runai.models import *
from runai.exceptions import ApiException


class TestAccessKeysApi:
    """Test cases for AccessKeysApi"""

    @pytest.fixture(autouse=True)
    def setup(self):
        """Setup test fixtures"""
        self.configuration = Configuration(
            client_id="test-client",
            client_secret="test-secret",
            runai_base_url="https://test.run.ai",
        )
        self.api_client = ApiClient(self.configuration)
        self.api = AccessKeysApi(self.api_client)

        # Mock the request method
        self.request_patcher = mock.patch.object(self.api_client.rest_client, "request")
        self.mock_request = self.request_patcher.start()
        yield
        self.request_patcher.stop()

    def test_create_access_key1(self):
        """Test case for create_access_key1

        Create an access key. Used to create an access key.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_creation_request1 = (
            runai.AccessKeyCreationRequest1()
        )  # AccessKeyCreationRequest1 | Access key object to create

        # Make request
        response = self.api.create_access_key1(
            access_key_creation_request1=access_key_creation_request1,
        )

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "POST"
        assert "/api/v1/access-keys" in kwargs["url"]

        # Verify body
        assert kwargs["body"] is not None

        # Verify response
        assert isinstance(response, AccessKeyPostResponse)

    def test_create_access_key1_error(self):
        """Test error handling for create_access_key1"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_creation_request1 = runai.AccessKeyCreationRequest1()

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.create_access_key1(
                access_key_creation_request1=access_key_creation_request1,
            )
        assert exc_info.value.status == 400

    def test_delete_access_key_by_id(self):
        """Test case for delete_access_key_by_id

        Delete an access key by id. Use to delete an access key by id.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_id = "access_key_id_example"  # str | The access key ID

        # Make request
        self.api.delete_access_key_by_id(
            access_key_id=access_key_id,
        )

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "DELETE"
        assert "/api/v1/access-keys/{accessKeyId}" in kwargs["url"]

    def test_delete_access_key_by_id_error(self):
        """Test error handling for delete_access_key_by_id"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_id = "access_key_id_example"

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.delete_access_key_by_id(
                access_key_id=access_key_id,
            )
        assert exc_info.value.status == 400

    def test_delete_access_key_by_id_administration(self):
        """Test case for delete_access_key_by_id_administration

        Delete an access key by id for administrations. Use to delete an access key by id for administrations.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_id = "access_key_id_example"  # str | The access key ID

        # Make request
        self.api.delete_access_key_by_id_administration(
            access_key_id=access_key_id,
        )

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "DELETE"
        assert "/api/v1/administration/access-keys/{accessKeyId}" in kwargs["url"]

    def test_delete_access_key_by_id_administration_error(self):
        """Test error handling for delete_access_key_by_id_administration"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_id = "access_key_id_example"

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.delete_access_key_by_id_administration(
                access_key_id=access_key_id,
            )
        assert exc_info.value.status == 400

    def test_get_access_key_by_id1(self):
        """Test case for get_access_key_by_id1

        Get access key by id. Retrieve the details of an access key by id.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_id = "access_key_id_example"  # str | The access key ID

        # Make request
        response = self.api.get_access_key_by_id1(
            access_key_id=access_key_id,
        )

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "GET"
        assert "/api/v1/access-keys/{accessKeyId}" in kwargs["url"]

        # Verify response
        assert isinstance(response, AccessKey1)

    def test_get_access_key_by_id1_error(self):
        """Test error handling for get_access_key_by_id1"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_id = "access_key_id_example"

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.get_access_key_by_id1(
                access_key_id=access_key_id,
            )
        assert exc_info.value.status == 400

    def test_get_access_keys(self):
        """Test case for get_access_keys

        Get a list of access keys. Retrieve a list of the user&#39;s access keys.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters

        # Make request
        response = self.api.get_access_keys()

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "GET"
        assert "/api/v1/access-keys" in kwargs["url"]

        # Verify response
        assert isinstance(response, AccessKeys)

    def test_get_access_keys_error(self):
        """Test error handling for get_access_keys"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.get_access_keys()
        assert exc_info.value.status == 400

    def test_get_access_keys_administration(self):
        """Test case for get_access_keys_administration

        Get a list of all access keys. Retrieve a list of all access keys.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters
        client_id = (
            "3434c-12323ab-4ce2ea6-b44fc-db344d"  # str | Filter results by clientId
        )
        created_by = "test@run.ai"  # str | Filter results by creatdBy

        # Make request
        response = self.api.get_access_keys_administration()

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "GET"
        assert "/api/v1/administration/access-keys" in kwargs["url"]

        # Verify query parameters
        assert "clientId=" in kwargs["url"]
        # Verify query parameters
        assert "createdBy=" in kwargs["url"]

        # Verify response
        assert isinstance(response, AccessKeysAdministration)

    def test_get_access_keys_administration_error(self):
        """Test error handling for get_access_keys_administration"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.get_access_keys_administration()
        assert exc_info.value.status == 400

    def test_regenerate_access_key_secret(self):
        """Test case for regenerate_access_key_secret

        Regenerate an access key secret. Use to regenerate the access key secret by id.
        """
        # Mock response
        mock_response = mock.Mock()
        mock_response.status = 200
        mock_response.read.return_value = json.dumps({"data": {}})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_id = "access_key_id_example"  # str | The access key ID

        # Make request
        response = self.api.regenerate_access_key_secret(
            access_key_id=access_key_id,
        )

        # Verify request was made
        assert self.mock_request.called
        args, kwargs = self.mock_request.call_args

        # Verify request method and URL
        assert kwargs["method"] == "POST"
        assert "/api/v1/access-keys/{accessKeyId}/secret" in kwargs["url"]

        # Verify response
        assert isinstance(response, RegenerateAccessKeySecret200Response)

    def test_regenerate_access_key_secret_error(self):
        """Test error handling for regenerate_access_key_secret"""
        # Mock error response
        mock_response = mock.Mock()
        mock_response.status = 400
        mock_response.read.return_value = json.dumps({"message": "Error message"})
        self.mock_request.return_value = mock_response

        # Test parameters
        access_key_id = "access_key_id_example"

        # Verify error handling
        with pytest.raises(ApiException) as exc_info:
            self.api.regenerate_access_key_secret(
                access_key_id=access_key_id,
            )
        assert exc_info.value.status == 400
